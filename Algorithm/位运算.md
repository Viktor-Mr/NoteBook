# 位运算 二进制数



## 按位异或 “^”

按位异或运算通常用来**将某变量中的某些位取反，且保留其他位不变。**

例如，如果需要将int型变量n的低8位取反，而其余位不变，则可以执行：

n ^= 0xff;

0xff: 1111 1111

## 按位或 “|”

按位或运算通常用来**将某变量中的某些位置1且保留其他位不变。**

例如，如果需要将int型变量n的低8位全置成1，而其余位不变，则可以执行：

n |= 0xff;

0xff: 1111 1111



## 左移运算符 “<<”

表达式：a << b 的值是：将a各二进位全部左移b位后得到的值。左移时，高位丢弃，

低位补0。a 的值不因运算而改变。

实际上，左移1位，就等于是乘以2，**左移n位，就等于是乘以2^n**。而左移操作比乘法操作快得多。



## 右移运算符 “>>”

表达式：a >> b 的值是：将a各二进位全部右移b位后得到的值。右移时，移出最右边的位就被丢弃。 a 的值不因运算而改变。

对于有符号数，如long,int,short,char类型变量，在右移时，符号位（即最高位）将一起移动，并且大多数C/C++编译器规定，**如果原符号位为1，则右移时高位就补充1，原符号位为0，则右移时高位就补充0。**



**实际上，右移n位，就相当于左操作数除以2n，并且将结果往小里取整。**

```c
-25 >> 4 = -2 

-2 >> 4 = -1

18 >> 4 = 1
```



## 右移运算符 “>>>”

\>>>：无符号右移。无论是正数还是负数，高位通通补0。



1. 对于正数，>>和>>>没区别。

2. 对于负数而言，-2 >>> 1，结果是2147483647（Integer.MAX_VALUE），-1 >>> 1，结果是2147483647（Integer.MAX_VALUE）。

```
 -2的二进制 ：1111_1111_1111_1111_1111_1111_1111_1110
 -2 >>> 1 : 0111_1111_1111_1111_1111_1111_1111_1111
```

```
-1的二进制 ：1111_1111_1111_1111_1111_1111_1111_1110
 -1 >>> 1 : 0111_1111_1111_1111_1111_1111_1111_1111
```







## 实际使用

**二进制的最右边是第0位**

```c
判断奇数偶数  x & 1  = 1是奇数 0 是偶数

指定的某一位数置1
#define setbit(x,y)  x|(1<<y)
    
指定的某一位数置0    
#define clrbit(x,y)  x&~(1<<y)

指定的某一位数取反    
#define reversebit(x,y)  x^(1<<y)

获取指定位数的大小 0 / -1    
(x&(1<<y))>>n   或者  (x>>y)&1 
    
获取的某一位的值    
#define getbit(x,y)   x&(1<<y)    
```



判断一个数是否为 2的整数次方

（N - 1 ）& N  == 0